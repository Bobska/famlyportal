{% load static %}
{% load family_tags %}
{% load app_status %}
{% load app_nav %}
<!DOCTYPE html>
<html lang="en">
<head>
    {% include 'partials/head_common.html' %}
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="{% static 'images/favicon.svg' %}">
    <link rel="icon" type="image/png" href="{% static 'images/favicon.png' %}">
    
    <!-- Custom Stylesheets -->
    <link href="{% static 'css/base.css' %}" rel="stylesheet">
    <link href="{% static 'css/main.css' %}" rel="stylesheet">
    
    <title>{% block title %}FamlyPortal{% endblock %}</title>
    <meta name="description" content="{% block description %}FamlyPortal - Helping families stay organized and connected{% endblock %}">
    
    <!-- Page-Specific Preloads -->
    {% block preload %}{% endblock %}
    
    <!-- Page-Specific CSS -->
    {% block extra_css %}{% endblock %}
    
    <!-- Additional Meta Tags -->
    {% block meta %}{% endblock %}
</head>
<body class="{% block body_class %}{% endblock %}">
    <!-- Accessibility Skip Link -->
    <a href="#main-content" class="visually-hidden-focusable">Skip to main content</a>
    
    <!-- Main Navigation -->
    {% include 'partials/navigation.html' %}

    <!-- App-Specific Secondary Navigation -->
    {% block extra_nav %}{% endblock %}

    <!-- Main Content Container -->
    <main id="main-content" class="container" role="main">
        <!-- System Messages -->
        {% include 'partials/messages.html' %}
        
        <!-- Page Breadcrumbs -->
        {% block breadcrumbs %}{% endblock %}
        
        <!-- Main Page Content -->
        {% block content %}{% endblock %}
    </main>

    <!-- Page Footer -->
    <footer class="bg-light mt-5 py-4" role="contentinfo">
        <div class="container text-center text-muted">
            <div class="row">
                <div class="col-md-8 mx-auto">
                <p class="mb-1">&copy; {% current_year %} FamlyPortal. Built with Django and Bootstrap.</p>
                <small>Helping families stay organized and connected.</small>
                
                <!-- Footer Links -->
                <div class="mt-2">
                    <small>
                        {% if user.is_authenticated %}
                            <a href="{% url 'accounts:profile' %}" class="text-muted me-3">Profile</a>
                            {% if user.primary_family %}
                                <a href="{% url 'accounts:family_members' user.primary_family.pk %}" class="text-muted me-3">Family</a>
                            {% endif %}
                        {% endif %}
                        <span class="text-muted">Version 1.0</span>
                    </small>
                </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Core JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/main.js' %}"></script>
    
    <!-- Page-Specific JavaScript -->
    {% block extra_js %}{% endblock %}
    
    <!-- Analytics & Tracking -->
    {% block analytics %}{% endblock %}
</body>
</html>
