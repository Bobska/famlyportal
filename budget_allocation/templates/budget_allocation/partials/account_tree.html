<!-- budget_allocation/partials/account_tree.html -->
<div class="account-item mb-2">
    <div class="d-flex justify-content-between align-items-center p-3 border rounded hover-shadow"
         style="border-left: 4px solid {{ account.color }}; transition: all 0.2s;">
        <div class="account-info flex-grow-1">
            <a href="{% url 'budget_allocation:account_detail' account.id %}" 
               class="text-decoration-none text-dark">
                <strong>{{ account.name }}</strong>
            </a>
            {% if account.description %}
                <br><small class="text-muted">{{ account.description|truncatechars:50 }}</small>
            {% endif %}
            
            <!-- Child Account Count -->
            {% if account.children.all.count > 0 %}
                <br><small class="text-info">
                    <i class="fas fa-layer-group"></i> 
                    {{ account.children.all.count }} child account{{ account.children.all.count|pluralize }}
                </small>
            {% endif %}
        </div>
        
        <div class="account-actions d-flex align-items-center">
            <!-- Account Balance -->
            <span class="badge bg-primary me-2" style="font-size: 0.9em;">
                ${{ account.current_balance|floatformat:2|default:"0.00" }}
            </span>
            
            <!-- Quick Actions -->
            <div class="btn-group btn-group-sm" role="group">
                <a href="{% url 'budget_allocation:account_detail' account.id %}" 
                   class="btn btn-outline-secondary btn-sm" title="View Details">
                    <i class="fas fa-eye"></i>
                </a>
                {% if account.can_have_children %}
                    <a href="{% url 'budget_allocation:add_child_account' account.id %}" 
                       class="btn btn-outline-success btn-sm" title="Add Child Account">
                        <i class="fas fa-plus"></i>
                    </a>
                {% endif %}
                <a href="{% url 'budget_allocation:edit_account' account.id %}" 
                   class="btn btn-outline-primary btn-sm" title="Edit Account">
                    <i class="fas fa-edit"></i>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Child Accounts -->
    {% if account.children.all %}
        <div class="ms-4 mt-2 child-accounts" id="children-{{ account.id }}">
            {% for child in account.children.all %}
                {% include 'budget_allocation/partials/account_tree.html' with account=child %}
            {% endfor %}
        </div>
    {% endif %}
</div>

<!-- CSS for hover effects -->
<style>
.hover-shadow:hover {
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075) !important;
    transform: translateY(-1px);
}

.account-item {
    position: relative;
}
</style>
